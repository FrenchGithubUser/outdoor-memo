"use strict";(globalThis["webpackChunkoutdoor_memo"]=globalThis["webpackChunkoutdoor_memo"]||[]).push([[407],{4407:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var n=s(9835);const a=e=>((0,n.dD)("data-v-261d1e81"),e=e(),(0,n.Cn)(),e),i={class:"index"},o=a((()=>(0,n._)("div",{class:"title"},"Outdoor Memo",-1)));function l(e,t,s,a,l,c){const r=(0,n.up)("FlashCards");return(0,n.wg)(),(0,n.iD)("div",i,[o,(0,n.Wm)(r)])}const c={class:"flash-cards"},r={class:"btns"};function d(e,t,s,a,i,o){const l=(0,n.up)("CategorySelectors"),d=(0,n.up)("FlashCard"),p=(0,n.up)("q-btn");return(0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(l,{onSelectionUpdated:e.categoriesUpdated,loading:e.loading},null,8,["onSelectionUpdated","loading"]),e.currentItem.id?((0,n.wg)(),(0,n.j4)(d,{key:0,item:e.currentItem,onNext:e.next},null,8,["item","onNext"])):(0,n.kq)("",!0),(0,n._)("div",r,[(0,n.Wm)(p,{class:"btn",label:"Précédent",color:"primary",disable:0===e.itemsDone.length,"no-caps":"",onClick:e.previous},null,8,["disable","onClick"]),(0,n.Wm)(p,{class:"btn",label:"Suivant",color:"primary","no-caps":"",onClick:e.next},null,8,["onClick"])])])}s(6890);var p=s(7524),m=s(6970),u=s(1957);const h=e=>((0,n.dD)("data-v-5d6f4f74"),e=e(),(0,n.Cn)(),e),g={class:"flash-card"},w={class:"image-container shadow-3"},_=["src"],b={key:1,class:"answer-status"},C={key:0,class:"true"},k={key:1,class:"false"},f=h((()=>(0,n._)("div",{class:"hint"},"(t'es nul !)",-1))),v={class:"response"};function y(e,t,s,a,i,o){const l=(0,n.up)("q-btn"),c=(0,n.up)("q-input");return(0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("div",w,[null===e.answerStatus?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e.item.media[0].web_path.replace("/small","")},null,8,_)):((0,n.wg)(),(0,n.iD)("div",b,[e.answerStatus?((0,n.wg)(),(0,n.iD)("div",C,"Bonne réponse !")):((0,n.wg)(),(0,n.iD)("div",k,[(0,n.Uk)(" Mauvaise réponse ! "),f])),(0,n._)("div",v,[(0,n._)("div",null,"Nom : "+(0,m.zw)(e.item.bird_name),1),(0,n._)("div",null,"Nom latin : "+(0,m.zw)(e.item.latin_name),1)]),(0,n.Wm)(l,{label:"Ok",color:"primary","no-caps":"",onClick:e.acknowledgeResponse},null,8,["onClick"])]))]),(0,n.Wm)(c,{"bg-color":"blue-grey-1",modelValue:e.input,"onUpdate:modelValue":t[0]||(t[0]=t=>e.input=t),label:"Nom",class:"answer-input",onKeyup:(0,u.D2)(e.checkAnswer,["enter"]),outlined:""},null,8,["modelValue","onKeyup"]),(0,n.Wm)(l,{class:"btn",label:"Valider",color:"primary","no-caps":"",onClick:e.checkAnswer},null,8,["onClick"])])}const S=(0,n.aZ)({name:"FlashCard",props:{item:{type:Object}},data(){return{input:"",answerStatus:null}},created(){},methods:{acknowledgeResponse(){this.emitter.emit("newAnswer",{status:this.answerStatus,id:this.item.id,date:(new Date).toUTCString(),latin_name:this.item.latin_name,media:[{web_path:this.item.media[0].web_path}]}),console.log(this.item),this.$emit("next")},checkAnswer(){if(""===this.input)return;let e=this.input.toLowerCase(),t=this.item.bird_name.toLowerCase(),s=this.item.latin_name.toLowerCase();this.answerStatus=e===t||e===s}},watch:{item(e){console.log(e.bird_name),console.log(e.latin_name),this.answerStatus=null,this.input=""}}});var D=s(1639),I=s(9379),U=s(6611),Z=s(9984),x=s.n(Z);const V=(0,D.Z)(S,[["render",y],["__scopeId","data-v-5d6f4f74"]]),W=V;x()(S,"components",{QBtn:I.Z,QInput:U.Z});const q={class:"category-selectors"},B={class:"selects"};function N(e,t,s,a,i,o){const l=(0,n.up)("q-select"),c=(0,n.up)("q-btn");return(0,n.wg)(),(0,n.iD)("div",q,[(0,n._)("div",B,[(0,n.Wm)(l,{outlined:"",modelValue:e.selectedSpecies,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedSpecies=t),options:e.species,label:"Espèce",class:"selector"},null,8,["modelValue","options"]),(0,n.Wm)(l,{outlined:"",modelValue:e.selectedCanton,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedCanton=t),options:e.cantons,label:"Canton",class:"selector"},null,8,["modelValue","options"])]),(0,n.Wm)(c,{label:"Chercher",color:"primary",loading:e.loading,"no-caps":"",onClick:e.selectionUpdated},null,8,["loading","onClick"])])}s(9665);const O=(0,n.aZ)({name:"CategorySelectors",components:{},props:{loading:{type:Boolean}},data(){return{species:[{label:"Oiseaux",id:1},{label:"Mamifères",id:3}],cantons:[],selectedSpecies:{},selectedCanton:{label:"Tous",code:""}}},created(){this.selectedSpecies=this.species[0],p.Z.get("https://api.allorigins.win/get?url="+encodeURIComponent("https://www.faune-france.org/index.php?m_id=1351&content=gallery_cantons&backlink=skip&frmPage=1&frmPage=1&sp_tg=1")).then((e=>{let t=JSON.parse(e.data.contents);Object.keys(t).forEach((e=>{this.cantons.push({label:t[e]["value"],code:e})})),this.cantons.unshift({label:"Tous",code:""})}))},methods:{selectionUpdated(){this.$emit("selection-updated",{canton:this.selectedCanton.code,species:this.selectedSpecies.id})}}});var A=s(6743);const F=(0,D.Z)(O,[["render",N],["__scopeId","data-v-31969278"]]),P=F;x()(O,"components",{QSelect:A.Z,QBtn:I.Z});const Q=(0,n.aZ)({name:"FlashCards",components:{FlashCard:W,CategorySelectors:P},props:{},data(){return{items:[],itemsDone:[],currentItem:{},loading:!0,apiBaseUrl:"https://www.faune-france.org/index.php?m_id=1351&content=gallery_pictures&backlink=skip&frmPage=all&mp_item_per_page=16&mp_current_page=1&frmAuthor=0&frmSpecies=0&frmCanton=0"}},created(){this.getData()},methods:{next(){this.itemsDone.unshift({...this.currentItem}),this.items.shift(),this.currentItem=this.items[0]},previous(){this.items.unshift({...this.currentItem}),this.currentItem=this.itemsDone[0],this.itemsDone.shift()},categoriesUpdated(e){console.log(e),this.getData(e.species,e.canton)},getData(e="1",t=""){this.loading=!0,p.Z.get("https://api.allorigins.win/get?url="+encodeURIComponent(this.apiBaseUrl+"&sp_tg="+e+"&frmCantons="+t)).then((e=>{console.log(""===e.data),""===e.data?this.$q.notify("Aucune donnée, utilisation des données précédentes"):(this.items=[],this.itemsDone=[],this.items=JSON.parse(e.data.contents).data,this.currentItem=this.items[0]),this.loading=!1}))}}}),T=(0,D.Z)(Q,[["render",d],["__scopeId","data-v-3a66dca7"]]),R=T;x()(Q,"components",{QBtn:I.Z});const j=(0,n.aZ)({name:"IndexPage",components:{FlashCards:R}}),L=(0,D.Z)(j,[["render",l],["__scopeId","data-v-261d1e81"]]),M=L}}]);